function set_seo_hidden_description(a){var b=sp_seo.Analysis.getText(a);b=b.substring(0,Math.min(b.length-1,200));jQuery("#sp_fake_meta_description").val(b)}sp_utilities=(function(){var a;(function(c){var b=(function(){var d=/((http|ftp|https):\/\/)?[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?/gmi,f=/(http|ftp|https):\/\/.*/gmi;function e(g){this.text=g}Object.defineProperty(e.prototype,"links",{get:function(){var h=this.text.match(d),g=h&&h.length>0;if(g){return h}else{return null}},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"hasLinks",{get:function(){var g=this.text.match(d);return !!(g&&g.length>0)},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"hasProtocol",{get:function(){var g=this.text.match(f);return !!(g&&g.length>0)},enumerable:true,configurable:true});return e})();c.TextProcessor=b})(a||(a={}));return a})();sp_constants=(function(){var a;(function(){a.MaxTweetLength=140;a.TweetLinkLength=23;a.TweetImageLinkLength=23;a.LinkToArticle="[link to article]"})(a||(a={}));return a})();function spCheckTwitterCharacterCountString(f,b,d,a,c){var e=spTwitterCharactersLeft(f,a);if(c!=undefined&&c==true){e=e-sp_constants.TweetImageLinkLength}jQuery(b).text(e);console.log(e);if(e<0){jQuery(d).addClass("disabled");jQuery(b).css("background-color","#d15b47!important")}else{if(e==0){jQuery(b).css("background-color","#abbac3!important");jQuery(d).removeClass("disabled")}else{jQuery(b).css("background-color","#82af6f!important");jQuery(d).removeClass("disabled")}}}function spTwitterCharactersLeft(f,a){var e=new sp_utilities.TextProcessor(f),d=sp_constants.MaxTweetLength;if(e.hasLinks){var c=0,b=e.links;d-=sp_constants.TweetLinkLength*e.links.length;for(;c<b.length;c++){d+=b[c].length;if(b[c].startsWith("https://")){d-=1}}}else{if(a!=undefined&&a==true){d-=sp_constants.TweetLinkLength}}if(f.indexOf(sp_constants.LinkToArticle)>-1){d-=sp_constants.TweetLinkLength-sp_constants.LinkToArticle.length}d-=f.length;return d}function show_social_modal(){jQuery("#sp_social_button").click();return false}jQuery(document).ready(function(a){sp_seo.Analysis.run(a);a("#title").keyup(function(){sp_seo.Analysis.run(a)});a("#title").change(function(){sp_seo.Analysis.run(a)});a("#title").on("paste",function(){sp_seo.Analysis.run(a)});a("#content").keyup(function(){sp_seo.Analysis.run(a)});a("#content").change(function(){sp_seo.Analysis.run(a)});a("#content").blur(function(){sp_seo.Analysis.run(a)});a("#content").focus(function(){sp_seo.Analysis.run(a)});a("#content").on("paste",function(){sp_seo.Analysis.run(a)});a("#spokal_keywords").keyup(function(){sp_seo.Analysis.run(a)});a("#spokal_keywords").change(function(){sp_seo.Analysis.run(a)});a("#sp-social-save").click(function(){sp_seo.Analysis.run(a)});if((typeof(tinymce)!="undefined")&&(typeof(tinymce.majorVersion)!="undefined")&&(typeof(tinyMCE)!="undefined")){if(parseInt(tinymce.majorVersion)<4){tinyMCE.onAddEditor.add(function(c,b){b.onKeyUp.add(function(d,f){sp_seo.Analysis.runVisual(a,d.getContent({format:"raw"}));set_seo_hidden_description(d.getContent({format:"raw"}))});b.onPaste.add(function(d,f){sp_seo.Analysis.runVisual(a,d.getContent({format:"raw"}));set_seo_hidden_description(d.getContent({format:"raw"}))});b.onChange.add(function(d,f){sp_seo.Analysis.runVisual(a,d.getContent({format:"raw"}));set_seo_hidden_description(d.getContent({format:"raw"}))})})}else{tinyMCE.on("AddEditor",function(c){var b=c.editor;b.on("keyup",function(d){sp_seo.Analysis.runVisual(a,b.getContent({format:"raw"}));set_seo_hidden_description(b.getContent({format:"raw"}))});b.on("paste",function(d){sp_seo.Analysis.runVisual(a,b.getContent({format:"raw"}));set_seo_hidden_description(b.getContent({format:"raw"}))});b.on("change",function(d){sp_seo.Analysis.runVisual(a,b.getContent({format:"raw"}));set_seo_hidden_description(b.getContent({format:"raw"}))});b.on("NodeChange",function(d){sp_seo.Analysis.runVisual(a,b.getContent({format:"raw"}));set_seo_hidden_description(b.getContent({format:"raw"}))})})}}});jQuery(document).ready(function(){jQuery("#sp-sec-title-show").click(function(){jQuery(this).hide();jQuery("#sp-sec-title-hide").show();jQuery("#spokal-secondary-title-input").show();return false});jQuery("#sp-sec-title-test-show").click(function(){jQuery(this).hide();jQuery("#sp-sec-title-hide").show();jQuery("#spokal-secondary-title-input").show();return false});jQuery("#sp-sec-title-hide").click(function(){var e=jQuery("#spokal-secondary-title-input").val();jQuery(this).hide();jQuery("#spokal-secondary-title-input").hide();if(e!=""){jQuery("#sp-sec-title-test-show").show()}else{jQuery("#sp-sec-title-show").show()}return false});var d=document.getElementById("sp_ab_title_wrap");var c=document.getElementById("spokal-secondary-title-input");if(d&&c){var a=jQuery("#sp_ab_title_wrap");var b=jQuery("#spokal-secondary-title-input");a.insertAfter("#post-body #title").removeAttr("hidden");b.insertAfter("#sp_ab_title_wrap");jQuery("#post-body #title").css({width:"90%"})}});jQuery(document).ready(function(){jQuery("#sp_draft_preview").hover(function(){jQuery("#sp_preview_pop_messag").show()},function(){jQuery("#sp_preview_pop_messag").hide()})});jQuery(document).ready(function(a){if(typeof(spKeywords)!="undefined"){jQuery("#spokal_keywords").autocomplete({source:spKeywords,appendTo:"#sp-keywords-wrapp",select:function(b,c){setTimeout(function(){sp_seo.Analysis.run(a)},100)},response:function(b,c){if(c.content.length===0){a("#sp-no-keyword-error").text("Please choose a keyword you've added to Spokal.")}else{a("#sp-no-keyword-error").empty()}}})}jQuery("#spokal_keywords").blur(function(){jQuery("#sp-no-keyword-error").empty();if(jQuery.inArray(this.value,spKeywords)==-1){this.value=""}});jQuery("#spokal_keywords").keyup(function(){if(this.value==""){jQuery("#sp-no-keyword-error").empty()}})});jQuery(document).ready(function(){if(typeof(spFocus)!="undefined"){jQuery("#spokal_focuses").autocomplete({source:spFocus,minLength:0,appendTo:"#spokal_focus_wrap",open:function(){var f=jQuery("#spokal_focus_wrap").height()+16;var d=jQuery("#spokal_focus_wrap").width()+16;jQuery("#spokal_focus_wrap > ul").css({left:0+"px",top:f+"px"});jQuery("#spokal_focus_wrap > ul").css({width:d+2+"px"});var c=document.getElementById("spokal_focus_wrap");var e=c.getElementsByTagName("DIV");if(e.length==2){jQuery("#spokal_focus_wrap > ul").css({display:"none"});jQuery(this).val("")}},select:function(g,i){var j=document.createElement("div");j.innerHTML=i.item.value;j.setAttribute("tabindex","0");j.setAttribute("class","sp_focus_tag");jQuery(j).insertBefore(this);var d=document.getElementById("spokal_focus_wrap");var h=d.getElementsByTagName("DIV");if(h.length){this.setAttribute("placeholder","");jQuery(this).css({width:4+"px"});jQuery(this).focus()}var f=h.length;var e=jQuery("#spokal_focuses_hidden").val();if(e==""){jQuery("#spokal_focuses_hidden").val(i.item.value+",")}else{if(jQuery(this.nextSibling).hasClass("sp_focus_tag")){jQuery("#spokal_focuses_hidden").val(i.item.value+","+e)}else{jQuery("#spokal_focuses_hidden").val(e+i.item.value+",")}}var c=jQuery.inArray(i.item.value,spFocus);spFocus.splice(c,1)},close:function(){jQuery(this).val("");jQuery(this).blur()},change:function(c,d){jQuery("#spokal_focuses").val("")}})}function b(){var c;if((c=document.activeElement)&&c!=document.body){return c}else{return null}}function a(d,c,e){spFocus.splice(c,1,d)}jQuery("#spokal_focus_wrap").click(function(){var c=b();if(c&&jQuery(c).hasClass("sp_focus_tag")){jQuery(c).focus()}else{jQuery("#spokal_focuses").focus()}});jQuery("#spokal_focuses").keydown(function(i){if(i.which==8){if(this.value==""){var d=document.getElementById("spokal_focus_wrap");var h=d.getElementsByTagName("DIV");var g=h.length;if(g){var f=jQuery("#spokal_focuses_hidden").val();if(f==""){}else{f=f.replace(h[g-1].innerHTML+",","");jQuery("#spokal_focuses_hidden").val(f)}spFocusBackup.forEach(a);jQuery(h[g-1]).remove();g=h.length;if(g==1){var c=jQuery.inArray(h[0].innerHTML,spFocus);spFocus.splice(c,1)}else{if(g==0){jQuery("#spokal_focuses").attr("placeholder","Choose...");jQuery("#spokal_focuses").css("width","65px")}}jQuery("#spokal_focuses").focus()}}}});jQuery(document).keydown(function(i){if(i.which==46){var f=b();if(f&&jQuery(f).hasClass("sp_focus_tag")){var g=jQuery("#spokal_focuses_hidden").val();if(g==""){}else{g=g.replace(f.innerHTML+",","");jQuery("#spokal_focuses_hidden").val(g)}var d=document.getElementById("spokal_focus_wrap");var h=d.getElementsByTagName("DIV");if((h.length==2)&&(f==h[0])){jQuery("#spokal_focuses").insertBefore(h[0])}spFocusBackup.forEach(a);jQuery(f).remove();ln=h.length;if(ln==1){var c=jQuery.inArray(h[0].innerHTML,spFocus);spFocus.splice(c,1)}else{if(ln==0){jQuery("#spokal_focuses").attr("placeholder","Choose...");jQuery("#spokal_focuses").css("width","65px")}}jQuery("#spokal_focuses").focus()}else{if(jQuery(f).hasClass("spokal_focuses_input")&&jQuery(f.nextSibling).hasClass("sp_focus_tag")){var g=jQuery("#spokal_focuses_hidden").val();if(g==""){}else{g=g.replace(f.nextSibling.innerHTML+",","");jQuery("#spokal_focuses_hidden").val(g)}var d=document.getElementById("spokal_focus_wrap");var h=d.getElementsByTagName("DIV");spFocusBackup.forEach(a);jQuery(f.nextSibling).remove();ln=h.length;if(ln==1){var c=jQuery.inArray(h[0].innerHTML,spFocus);spFocus.splice(c,1)}else{if(ln==0){jQuery("#spokal_focuses").attr("placeholder","Choose...");jQuery("#spokal_focuses").css("width","65px")}}jQuery("#spokal_focuses").focus()}}}});jQuery("#spokal_focuses").blur(function(){if(jQuery.inArray(this.value,spFocus)==-1){this.value="";if(jQuery(this.nextSibling).hasClass("sp_focus_tag")){jQuery(this).insertAfter(this.nextSibling)}}})});var is_modal_changed=false;var sp_twt_old;var sp_twt_alt_old;function sp_is_hidden(b){var a=window.getComputedStyle(b);return(a.display==="none")}function sp_show_twt_link_info(){var a=jQuery("#sp_twt_desc").val();if(a.indexOf(sp_constants.LinkToArticle)>-1){jQuery("#sp-twt-link-info").show()}}function sp_disable_soc_account(e){var c=e.getAttribute("sp-account-disabled");var a=e.getAttribute("sp-soc-id");var f=document.getElementById("sp_disabled_soc_accounts").value;var g=document.getElementById("sp_enabled_soc_accounts").value;if(f!=""){var d=f.split(",")}else{var d=new Array()}if(g!=""){var b=g.split(",")}else{var b=new Array()}var h=jQuery.inArray(a,d);var i=jQuery.inArray(a,b);if(c=="true"){if(h>-1){d.splice(h,1);b.push(a)}e.setAttribute("sp-account-disabled","false")}else{if(h==-1){d.push(a)}if(i>-1){b.splice(i,1)}e.setAttribute("sp-account-disabled","true")}document.getElementById("sp_disabled_soc_accounts").value=d.join();document.getElementById("sp_enabled_soc_accounts").value=b.join()}function sp_set_recurring(a){if(jQuery(a).hasClass("sp_recurring_enabled")){jQuery("#sp_recurring_inner").html("This post is not in or will be removed from your recurring queue.");jQuery("#sp_is_recurring_message").css("top","-53px");jQuery(a).removeClass("sp_recurring_enabled");jQuery(a).addClass("sp_recurring_disabled");jQuery("#sp_recurring_value").val("false")}else{jQuery("#sp_is_recurring_message").css("top","-73px");jQuery("#sp_recurring_inner").html("This post is in or will be added to your recurring queue. It will assume the same focus as the post (if any)");jQuery(a).removeClass("sp_recurring_disabled");jQuery(a).addClass("sp_recurring_enabled");jQuery("#sp_recurring_value").val("true")}}jQuery(document).ready(function(f){var e;var c;function b(j,k,i){if(e){e.open();return}e=wp.media.frames.file_frame=wp.media({title:"Use Image",button:{text:"Use Image"},multiple:false});e.on("select",function(){var l=e.state().get("selection").first().toJSON();if(j!=""){jQuery(j).hide()}jQuery(k).val(l.url);jQuery(i).attr("src",l.url);jQuery(i).show();f("#sp_twt_img_remove").show();sp_seo.Func.checkTwitterCharacterCount(jQuery("#sp_twt_desc"),jQuery("#sp_tweetCharacterCount"),jQuery("#sp-social-save"),sp_seo.Func.hasTwitterImage(jQuery("#sp_twt_img_input")))});e.open()}function g(j,k,i){if(c){c.open();return}c=wp.media.frames.file_frame=wp.media({title:"Use Image",button:{text:"Use Image"},multiple:false});c.on("select",function(){var l=c.state().get("selection").first().toJSON();if(j!=""){jQuery(j).hide()}jQuery(k).val(l.url);jQuery(i).attr("src",l.url);jQuery(i).show();f("#sp_fb_img_remove").show()});c.open()}f("#sp_twt_img_set").click(function(i){i.preventDefault();b("#sp_twt_img_set","#sp_twt_img_input","#sp_twt_img_elem")});f("#sp_twt_img_remove").click(function(i){i.preventDefault();jQuery("#sp_twt_img_input").val("");jQuery("#sp_twt_img_elem").attr("src","");jQuery("#sp_twt_img_elem").hide();jQuery(this).hide();jQuery("#sp_twt_img_set").show();sp_seo.Func.checkTwitterCharacterCount(jQuery("#sp_twt_desc"),jQuery("#sp_tweetCharacterCount"),jQuery("#sp-social-save"),sp_seo.Func.hasTwitterImage(jQuery("#sp_twt_img_input")))});f("#sp_twt_img_elem").click(function(i){i.preventDefault();b("","#sp_twt_img_input","#sp_twt_img_elem")});f("#sp_fb_img_set").click(function(i){i.preventDefault();g("#sp_fb_img_set","#sp_fb_img_input","#sp_fb_img_elem")});f("#sp_fb_img_remove").click(function(i){i.preventDefault();jQuery("#sp_fb_img_input").val("");jQuery("#sp_fb_img_elem").attr("src","");jQuery("#sp_fb_img_elem").hide();jQuery(this).hide();jQuery("#sp_fb_img_set").show()});f("#sp_fb_img_elem").click(function(i){i.preventDefault();g("","#sp_fb_img_input","#sp_fb_img_elem")});jQuery("#close_sp_soc_modal").click(function(){jQuery("#sp_social_modal").hide();return false});jQuery("#sp_social_button").click(function(){try{d();sp_show_twt_link_info();h(document.getElementById("sp_fb_desc"));h(document.getElementById("sp_fb_post_desc"));h(document.getElementById("sp_meta_desc"));h(document.getElementById("sp_twt_desc"));sp_twt_old=jQuery("#sp_twt_desc").val();sp_twt_alt_old=jQuery("#sp_twt_desc").val()}catch(i){}jQuery("#sp_social_blank").show();jQuery("#sp_social_modal").show();return false});var a=jQuery("#wp-content-editor-container #content").val();set_seo_hidden_description(a);f("#content").keyup(function(){set_seo_hidden_description(this.value)});f("#content").change(function(){set_seo_hidden_description(this.value)});f("#content").blur(function(){set_seo_hidden_description(this.value)});f("#content").focus(function(){set_seo_hidden_description(this.value)});f("#content").on("paste",function(){set_seo_hidden_description(this.value)});function d(){var j=jQuery("#wp-content-editor-container #content").val();var j=sp_seo.Analysis.getText(j);j=j.substring(0,Math.min(j.length,200));if((!sp_fb_desc_set)){jQuery("#sp_fb_desc").val(j)}if((!sp_meta_desc_set)){jQuery("#sp_meta_desc").val(j)}var k=160-jQuery("#sp_meta_desc").val().length;if(k<0){jQuery("#sp_metaCharacterCount").css("color","rgb(248, 148, 6)")}else{jQuery("#sp_metaCharacterCount").css("color","rgb(0, 0, 0)")}jQuery("#sp_metaCharacterCount").html(k);var i=jQuery("#titlewrap #title").val();if((!is_modal_changed)&&(!sp_fb_title_set)){jQuery("#sp_fb_title").val(i)}if((!sp_twt_title_set)){jQuery("#sp_twt_desc").val(i+" [link to article] ")}jQuery("#sp_meta_desc_title").html(i);sp_seo.Func.checkTwitterCharacterCount(jQuery("#sp_twt_desc"),jQuery("#sp_tweetCharacterCount"),jQuery("#sp-social-save"),sp_seo.Func.hasTwitterImage(jQuery("#sp_twt_img_input")))}jQuery("#sp_google_icon").hover(function(){jQuery("#sp_google_message").show()},function(){jQuery("#sp_google_message").hide()});jQuery(".sp-social-account").hover(function(){var i=document.getElementById("sp-acc-popup-msg");var j=jQuery(this).position().left;var k=this.getAttribute("sp-soc-title");document.getElementById("sp-acc-inner-msg").innerHTML=k;i.style.display="block";i.style.left=j+"px";i.style.marginLeft=-(i.offsetWidth/2)+25+"px"},function(){var i=this.getAttribute("sp-soc-title");document.getElementById("sp-acc-inner-msg").innerHTML="";document.getElementById("sp-acc-popup-msg").style.display="none"});jQuery("#sp_enable_recurring").hover(function(){jQuery("#sp_is_recurring_message").show()},function(){jQuery("#sp_is_recurring_message").hide()});jQuery("#sp_twt_img_elem").hover(function(){jQuery("#sp_social_twt_img_messag").show()},function(){jQuery("#sp_social_twt_img_messag").hide()});jQuery("#sp_fb_img_elem").hover(function(){jQuery("#sp_social_fb_img_messag").show()},function(){jQuery("#sp_social_fb_img_messag").hide()});jQuery("#sp_social_button").hover(function(){jQuery("#sp_social_pop_messag").show()},function(){jQuery("#sp_social_pop_messag").hide()});jQuery("#sp_soc_reset").hover(function(){jQuery("#sp_social_recover_messag").show()},function(){jQuery("#sp_social_recover_messag").hide()});jQuery("#sp-social-save").click(function(){if(jQuery(this).hasClass("disabled")){return false}is_modal_changed=true;jQuery("#sp_social_modal").hide();jQuery("#sp_social_blank").hide();return false});jQuery("#title").keyup(function(){var i=this.value;jQuery("#sp_meta_desc_title").html(i)});jQuery("#sp_twt_desc").keyup(function(){var i=this.value;if(sp_twt_old.indexOf(sp_constants.LinkToArticle)>-1&&i.indexOf(sp_constants.LinkToArticle)==-1){jQuery("#sp_twt_desc").val(sp_twt_old)}else{sp_twt_old=i}});jQuery("#sp_fb_title").keyup(function(){sp_fb_title_set=true});jQuery("#sp_fb_desc").keyup(function(){sp_fb_desc_set=true;sp_meta_desc_set=true});jQuery("#sp_twt_desc").keyup(function(){sp_twt_title_set=true;sp_seo.Func.checkTwitterCharacterCount(jQuery("#sp_twt_desc"),jQuery("#sp_tweetCharacterCount"),jQuery("#sp-social-save"),sp_seo.Func.hasTwitterImage(jQuery("#sp_twt_img_input")))});jQuery("#sp_meta_desc").keyup(function(){sp_meta_desc_set=true;sp_fb_desc_set=true;var i=160-this.value.length;if(i<0){jQuery("#sp_metaCharacterCount").css("color","rgb(248, 148, 6)")}else{jQuery("#sp_metaCharacterCount").css("color","rgb(0, 0, 0)")}jQuery("#sp_metaCharacterCount").html(i)});jQuery("#sp_soc_reset").click(function(){jQuery("#sp_twt_img_elem").attr("src","");jQuery("#sp_twt_img_elem").hide();jQuery("#sp_twt_img_set").show();jQuery("#sp_twt_img_remove").hide();jQuery("#sp_twt_img_input").val("");jQuery("#sp_fb_img_elem").attr("src","");jQuery("#sp_fb_img_elem").hide();jQuery("#sp_fb_img_set").show();jQuery("#sp_fb_img_remove").hide();jQuery("#sp_fb_img_input").val("");var j=jQuery("#wp-content-editor-container #content").val();var k=sp_seo.Analysis.getText(j);k=k.substring(0,200);jQuery("#sp_fb_desc").val(k);jQuery("#sp_meta_desc").val(k);var i=jQuery("#titlewrap #title").val();jQuery("#sp_fb_title").val(i);jQuery("#sp_twt_desc").val(i+" [link to article] ");sp_seo.Func.checkTwitterCharacterCount(jQuery("#sp_twt_desc"),jQuery("#sp_tweetCharacterCount"),jQuery("#sp-social-save"),sp_seo.Func.hasTwitterImage(jQuery("#sp_twt_img_input")));return false});function h(l){try{var i=f(document.getElementById("sp-content-hidden")),k=null;k=f(l).val();k=k.replace(/\n/g,"<br>");i.html(k+'<br class="lbr">');style=window.getComputedStyle(l);if((i.height()-parseInt(style.maxHeight))>3){f(l).css("overflow","");f(l).css("overflow-y","visible");f(l).css("overflow-x","hidden")}else{f(l).css("overflow","hidden");f(l).css("overflow-y","");f(l).css("overflow-x","");if(i.height()<parseInt(style.minHeight)){f(l).css("height",style.minHeight)}else{f(l).css("height",i.height())}}i.html("")}catch(j){}}f("#sp_fb_desc").on("keyup",function(){h(this)});f("#sp_fb_post_desc").on("keyup",function(){h(this)});f("#sp_meta_desc").on("keyup",function(){h(this)});f("#sp_twt_desc").on("keyup",function(){h(this)})});jQuery(document).ready(function(){jQuery("#close_inline_cta_settings").click(function(){jQuery("#sp_inline_cta_settings").hide();return false});jQuery("#sp_inline_cta_short").click(function(){jQuery("#sp_inline_cta_settings").show();return false});jQuery(".sp-optin-cancel").click(function(){jQuery("#sp_inline_cta_settings").hide();return false});function a(c,b){if((c.indexOf('"')===-1)&&(c.indexOf("]")===-1)&&(c.indexOf("[")===-1)&&(c!=="")){return true}else{jQuery(".sp-optin-alert-error").html("The "+b+' field must not be empty or contain the [, ] or " characters');jQuery(".sp-optin-alert-error").show();return false}}jQuery(".sp-optin-generate").click(function(){jQuery(".sp-optin-alert-error").hide();jQuery("#optin-value-wrapp").hide();jQuery("#sp-optin-shortcode-value").val("");var m=jQuery("#sp-optin-title").val();if(!a(m,"Title")){return false}var j=jQuery("#sp-optin-text").val();if(!a(j,"Text")){return false}var i=jQuery("#sp-optin-buttontext").val();if(!a(i,"Button text")){return false}var d=jQuery("#sp-optin-success-message").val();if(!a(d,"Success message")){return false}var b=jQuery("#sp-optin-error-message").val();if(!a(b,"Error message")){return false}var e=jQuery("#sp-optin-invalid-email-message").val();if(!a(e,"Invalid error message")){return false}var n=jQuery("#sp-optin-image-hidden").val();var g=jQuery("#sp-optin-border").is(":checked");var c=jQuery("#sp-optin-collectfirstname").is(":checked");var l=jQuery("#sp-optin-collectlastname").is(":checked");var f=jQuery("#sp-optin-collectphone").is(":checked");var k=jQuery("#sp-optin-collectcompany").is(":checked");var h='[optin title="'+m+'" text="'+j+'" buttontext="'+i+'" successMessage="'+d+'" errorMessage="'+b+'" invalidEmailMessage="'+e+'" image="'+n+'" border="'+g+'" collectfirstname="'+c+'" collectlastname="'+l+'" collectphone="'+f+'" collectcompany="'+k+'"]';jQuery("#sp-optin-shortcode-value").val(h);jQuery("#optin-value-wrapp").show();return false});jQuery(".sp-inline-remove").click(function(){jQuery("#sp-optin-image").attr("src","");jQuery("#sp-optin-image-hidden").val("");jQuery(this).addClass("disabled");return false})});jQuery(document).ready(function(b){var a;b(".sp-inline-upload").click(function(c){c.preventDefault();if(a){a.open();return}a=wp.media.frames.file_frame=wp.media({title:"Use Image",button:{text:"Use Image"},multiple:false});a.on("select",function(){b("#sp_inline_spinner").css("display","inline-block");var d=a.state().get("selection").first().toJSON();b.ajax({type:"POST",url:ajaxurl,data:{action:"sp_inline_cta_img",id:d.id},success:function(e){b("#sp_inline_spinner").hide();if(e.url){b("#sp-optin-image").attr("src",e.url);b("#sp-optin-image-hidden").val(e.url)}}});jQuery(".sp-inline-remove").removeClass("disabled")});a.open()})});var sp_seo=new Object();sp_seo.Analysis={init:function(){},status:{danger:"danger",warning:"warning",success:"success"},thresholds:{danger:25,warning:15,success:0},setupAnalysis:function(c){c=c||{};c.results=[];c.title=c.title||"";c.content=c.content||"";c.keyword=c.keyword||"";c.description=c.description||"";c.status=0;c.scoreTotal=sp_seo.Analysis.thresholds.success;c.metaDescription=c.metaDescription||"";c.text=sp_seo.Analysis.getText(c.content);c.tokens=c.text.split(/[\W]+/gi);c.keywordEscaped=c.keyword.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");c.keywordRegex=new RegExp(c.keywordEscaped,"gi");c.keywordWordLength=sp_seo.Analysis.getWordCount(c.keyword);c.textStopped=sp_seo.Analysis.removeStopWord(c.text);c.tokensStopped=c.textStopped.split(/[\W]+/gi);c.titleStopped=sp_seo.Analysis.removeStopWord(c.title);c.descriptionStopped=sp_seo.Analysis.removeStopWord(c.description);c.keywordStopped=sp_seo.Analysis.removeStopWord(c.keywordEscaped);c.keywordStoppedRegex=new RegExp(c.keywordStopped,"gi");var b=document.createElement("DIV");b.innerHTML=c.content;var a=jQuery(b);c.images=a.find("img");c.linksOutbound=a.find("a[href^=http]");return c},getWordCount:function(a){var b=a.replace(/(^\s*)|(\s*$)/gi,"");b=b.replace(/[ ]{2,}/gi," ");b=b.replace(/\n /,"\n");return b.split(" ").length},analyze:function(a){sp_seo.Analysis.setupAnalysis(a);if(typeof(spKeywords)=="undefined"){return a}if(a.keyword.length==0){a.results=[sp_seo.Analysis.noKeyword()];a.status=sp_seo.Analysis.status.danger;return a}a.results=jQuery.map(sp_seo.Analysis.modules,function(c){var b=c.analyze(a);b.scoreCurrent=b.score[b.status];a.scoreTotal+=b.scoreCurrent;return b}).sort(function(d,c){return Math.min(Math.max(sp_seo.Analysis.thresholds[c.status]-sp_seo.Analysis.thresholds[d.status],-1),1)});a.status=sp_seo.Analysis.getStatus(a.scoreTotal);return a},getText:function(b){var a=jQuery("<div />").html(b);a.find("style").html("");a.find("script[data-sp-ignore]").html("");a.find("div").after(" ");return a.text().replace(/\s+/g," ")},getStatus:function(a){if(a>=sp_seo.Analysis.thresholds.danger){return sp_seo.Analysis.status.danger}if(a>=sp_seo.Analysis.thresholds.warning){return sp_seo.Analysis.status.warning}return sp_seo.Analysis.status.success},removeStopWord:function(a){return a.replace(/\b[\w]+\b/g,function(b){if(sp_seo.Analysis.isStopWord(b)){return""}return jQuery.trim(b)})},isStopWord:function(a){return sp_seo.Analysis.stopWords.match(sp_seo.Analysis.wordMatch(a))},wordMatch:function(a){return new RegExp("\\b"+a+"\\b","gi")},result:function(b){var a={id:b,status:sp_seo.Analysis.status.danger,score:{}};a.score[sp_seo.Analysis.status.danger]=10;a.score[sp_seo.Analysis.status.warning]=5;a.score[sp_seo.Analysis.status.success]=0;return a},noKeyword:function(){var a=sp_seo.Analysis.result("no-keyword");a.status=sp_seo.Analysis.status.danger;a.scoreCurrent=10;return a},run:function(b){var c=sp_seo.Analysis.analyze({content:b("#content").val(),keyword:b("#spokal_keywords").val(),title:b("#title").val(),metaDescription:b("#sp_meta_desc").val()});var a=sp_seo.Analysis.handleAnalyse(c);b("#sp_seo_analyser").html(a);b("#sp_post_lenght").val(c.tokens.length-1);return c},runVisual:function(c,b){var d=sp_seo.Analysis.analyze({content:b,keyword:c("#spokal_keywords").val(),title:c("#title").val(),metaDescription:c("#sp_meta_description_input").val()});var a=sp_seo.Analysis.handleAnalyse(d);c("#sp_seo_analyser").html(a);c("#sp_post_lenght").val(d.tokens.length-1);return d},handleAnalyse:function(d){var a="";for(var b in d.results){if(d.results.hasOwnProperty(b)){var c=d.results[b];if(c.id=="no-keyword"){return sp_seo.Method.noKeyword(c)}if(c.id=="content-keyword"){a+=sp_seo.Method.contentKeyword(c)}if(c.id=="content-length"){a+=sp_seo.Method.contentLength(c)}if(c.id=="title-contains"){a+=sp_seo.Method.titleContains(c)}if(c.id=="metadesc-keyword"){a+=sp_seo.Method.metadescKeyword(c)}if(c.id=="content-image-alt"){a+=sp_seo.Method.contentImageAlt(c)}if(c.id=="content-link"){a+=sp_seo.Method.contentLink(c)}}}return a},the:"end"};sp_seo.Method={init:function(){},noKeyword:function(a){return'<div class="sp-seo-alert sp-seo-danger">There is no keyword for this post.</div>'},contentKeyword:function(b){var a="";a+='<div class="sp-seo-alert sp-seo-'+b.status+'" >The keyword makes up <strong>'+b.density.toFixed(2)+"</strong>% of your blog, ";if(b.density>=b.min&&b.density<=b.max){a+="<span>which is great,</span>"}if(b.density<b.min){a+="<span>which is low, aim for a minimum of <strong>"+b.min.toFixed(2)+"</strong>%,</span>"}if(b.density>b.max){a+="<span>which is over the advised <strong>"+b.max.toFixed(2)+"</strong>% maximum,</span>"}a+=" you used your keyword <strong>"+b.occurrences+"</strong> times.</div>";return a},contentLength:function(b){var a="";a+='<div class="sp-seo-alert sp-seo-'+b.status+'" >Your blog has <strong>'+b.wordLength+"</strong> words. ";if(b.wordLength<b.low){a+="<span>This is too short. Keep going - it should be more than <strong></strong>"+b.low+".</span>"}if(b.wordLength>=b.low&&b.wordLength<b.medium){a+="<span>It's short and sweet, but should be more than <strong>"+b.medium+"</strong>.</span>"}if(b.wordLength>=b.medium){a+="<span>which Spokey says is beautiful!</span>"}a+="</div>";return a},titleContains:function(b){var a="";a+='<div class="sp-seo-alert sp-seo-'+b.status+'" >';if(b.status=="danger"){a+="<span>Your keyword isn't in the title. Tisk tisk.</span>"}if(b.status=="success"){a+="<span>Your keyword is in the title. Awesome.</span>"}a+="</div>";return a},metadescKeyword:function(b){var a="";a+='<div class="sp-seo-alert sp-seo-'+b.status+'" >';if(b.status=="danger"){a+='<span>You haven\'t used the keyword in the meta description that shows up in search results. <a href="#" id="sp-fix-meta-desc" onclick="show_social_modal()">Fix this.</a></span>'}if(b.status=="success"){a+="<span>You used your keyword in the meta description that shows up in search results. (Doesn't affect SEO, but increases clicks.)</span>"}a+="</div>";return a},contentImageAlt:function(b){var a="";a+='<div class="sp-seo-alert sp-seo-'+b.status+'" >';if(b.status=="danger"){a+="<span>Your blog has a photo without a title (or the title does not contain the keyword), help Google by adding your keyword in there.</span>"}if(b.status=="warning"){a+="<span>Your blog doesn't have any photos. Boo.</span>"}if(b.status=="success"){a+="<span>Your blog has a photo that's labelled with your keyword.</span>"}a+="</div>";return a},contentLink:function(b){var a="";a+='<div class="sp-seo-alert sp-seo-'+b.status+'" >';if(b.linksOutboundLength){a+="<span>Your blog has <strong>"+b.linksOutboundLength+"</strong> link(s) to other sites.</span>"}else{a+="<span>Your blog has <strong>no</strong> link(s) to other sites.</span></span>"}a+="</div>";return a},the:"end"};sp_seo.Func={init:function(){},checkTwitterCharacterCount:function(d,c,h,g){if(d==undefined||c==undefined){return}var b=false;var a=jQuery(d).val();var e=jQuery("<p>"+a+"</p>");var f=e.find("span");if(f!=undefined&&f!=null&&f.is("span")){b=true;f.remove()}spCheckTwitterCharacterCountString(e.text(),c,h,b,g)},hasTwitterImage:function(b){var a=b.val();if((a)){if(a.length>0){return true}}return false},the:"end"};sp_seo.Analysis.modules=[{id:"content-keyword",analyze:function(c){var a=sp_seo.Analysis.result(this.id);var b=c.textStopped.match(c.keywordStoppedRegex);a.occurrences=b?b.length:0;a.density=(a.occurrences/Math.max(((c.tokens.length-1)/c.keywordWordLength),1))*100;a.max=3.5;a.min=0.8;a.score[sp_seo.Analysis.status.danger]=8;a.score[sp_seo.Analysis.status.warning]=4;if(a.density>=a.min&&a.density<a.max){a.status=sp_seo.Analysis.status.success}if(a.density>0&&a.density<a.min){a.status=sp_seo.Analysis.status.warning}return a}},{id:"content-length",analyze:function(b){var a=sp_seo.Analysis.result(this.id);a.wordLength=b.tokens.length-1;a.low=600;a.medium=1000;a.score[sp_seo.Analysis.status.danger]=10;a.score[sp_seo.Analysis.status.warning]=5;if(a.wordLength>=a.low){a.status=sp_seo.Analysis.status.warning}if(a.wordLength>=a.medium){a.status=sp_seo.Analysis.status.success}return a}},{id:"content-image-alt",analyze:function(c){var a=sp_seo.Analysis.result(this.id);a.altsLength=0;a.altsKeywordLength=0;a.score[sp_seo.Analysis.status.danger]=6;a.score[sp_seo.Analysis.status.warning]=1;if(c.images.length>0){var b=jQuery.grep(jQuery.map(c.images,function(d){return jQuery(d).attr("alt")||""}),function(d){return d.match(c.keywordRegex)});if(b.length>0){a.status=sp_seo.Analysis.status.success}}else{a.status=sp_seo.Analysis.status.warning}return a}},{id:"content-link",analyze:function(b){var a=sp_seo.Analysis.result(this.id);a.status=sp_seo.Analysis.status.warning;a.linksOutboundLength=b.linksOutbound.length;a.scoreMax=70;a.score[sp_seo.Analysis.status.warning]=4;if(a.linksOutboundLength>0){a.status=sp_seo.Analysis.status.success}return a}},{id:"title-contains",analyze:function(b){var a=sp_seo.Analysis.result(this.id);a.keywordExists=b.title.match(b.keywordRegex);a.keywordStarts=b.title.match(new RegExp("^("+b.keywordEscaped+")","gi"));a.scoreMax=150;a.score[sp_seo.Analysis.status.danger]=10;if(a.keywordExists){a.status=sp_seo.Analysis.status.success}return a}},{id:"metadesc-keyword",analyze:function(b){var a=sp_seo.Analysis.result(this.id);a.score[sp_seo.Analysis.status.danger]=10;if(b.metaDescription.match(b.keywordRegex)){a.status=sp_seo.Analysis.status.success}return a}}];sp_seo.Analysis.stopWords="a,able,about,above,abst,accordance,according,accordingly,across,act,actually,added,adj,affected,affecting,affects,after,afterwards,again,against,ah,all,almost,alone,along,already,also,although,always,am,among,amongst,an,and,announce,another,any,anybody,anyhow,anymore,anyone,anything,anyway,anyways,anywhere,apparently,approximately,are,aren,arent,arise,around,as,aside,ask,asking,at,auth,available,away,awfully,b,back,be,became,because,become,becomes,becoming,been,before,beforehand,begin,beginning,beginnings,begins,behind,being,believe,below,beside,besides,between,beyond,biol,both,brief,briefly,but,by,c,ca,came,can,cannot,can't,cause,causes,certain,certainly,co,com,come,comes,contain,containing,contains,could,couldnt,d,date,did,didn't,different,do,does,doesn't,doing,done,don't,down,downwards,due,during,e,each,ed,edu,effect,eg,eight,eighty,either,else,elsewhere,end,ending,enough,especially,et,et-al,etc,even,ever,every,everybody,everyone,everything,everywhere,ex,except,f,far,few,ff,fifth,first,five,fix,followed,following,follows,for,former,formerly,forth,found,four,from,further,furthermore,g,gave,get,gets,getting,give,given,gives,giving,go,goes,gone,got,gotten,h,had,happens,hardly,has,hasn't,have,haven't,having,he,hed,hence,her,here,hereafter,hereby,herein,heres,hereupon,hers,herself,hes,hi,hid,him,himself,his,hither,home,how,howbeit,however,hundred,i,id,ie,if,i'll,im,immediate,immediately,importance,important,in,inc,indeed,index,information,instead,into,invention,inward,is,isn't,it,itd,it'll,its,itself,i've,j,just,k,keep,keeps,kept,kg,km,know,known,knows,l,largely,last,lately,later,latter,latterly,least,less,lest,let,lets,like,liked,likely,line,little,'ll,look,looking,looks,ltd,m,made,mainly,make,makes,many,may,maybe,me,mean,means,meantime,meanwhile,merely,mg,might,million,miss,ml,more,moreover,most,mostly,mr,mrs,much,mug,must,my,myself,n,na,name,namely,nay,nd,near,nearly,necessarily,necessary,need,needs,neither,never,nevertheless,new,next,nine,ninety,no,nobody,non,none,nonetheless,noone,nor,normally,nos,not,noted,nothing,now,nowhere,o,obtain,obtained,obviously,of,off,often,oh,ok,okay,old,omitted,on,once,one,ones,only,onto,or,ord,other,others,otherwise,ought,our,ours,ourselves,out,outside,over,overall,owing,own,p,page,pages,part,particular,particularly,past,per,perhaps,placed,please,plus,poorly,possible,possibly,potentially,pp,predominantly,present,previously,primarily,probably,promptly,proud,provides,put,q,que,quickly,quite,qv,r,ran,rather,rd,re,readily,really,recent,recently,ref,refs,regarding,regardless,regards,related,relatively,research,respectively,resulted,resulting,results,right,run,s,said,same,saw,say,saying,says,sec,section,see,seeing,seem,seemed,seeming,seems,seen,self,selves,sent,seven,several,shall,she,shed,she'll,shes,should,shouldn't,show,showed,shown,showns,shows,significant,significantly,similar,similarly,since,six,slightly,so,some,somebody,somehow,someone,somethan,something,sometime,sometimes,somewhat,somewhere,soon,sorry,specifically,specified,specify,specifying,still,stop,strongly,sub,substantially,successfully,such,sufficiently,suggest,sup,sure,t,take,taken,taking,tell,tends,th,than,thank,thanks,thanx,that,that'll,thats,that've,the,their,theirs,them,themselves,then,thence,there,thereafter,thereby,thered,therefore,therein,there'll,thereof,therere,theres,thereto,thereupon,there've,these,they,theyd,they'll,theyre,they've,think,this,those,thou,though,thoughh,thousand,throug,through,throughout,thru,thus,til,tip,to,together,too,took,toward,towards,tried,tries,truly,try,trying,ts,twice,two,u,un,under,unfortunately,unless,unlike,unlikely,until,unto,up,upon,ups,us,use,used,useful,usefully,usefulness,uses,using,usually,v,value,various,'ve,very,via,viz,vol,vols,vs,w,want,wants,was,wasn't,way,we,wed,welcome,we'll,went,were,weren't,we've,what,whatever,what'll,whats,when,whence,whenever,where,whereafter,whereas,whereby,wherein,wheres,whereupon,wherever,whether,which,while,whim,whither,who,whod,whoever,whole,who'll,whom,whomever,whos,whose,why,widely,willing,wish,with,within,without,won't,words,world,would,wouldn't,www,x,y,yes,yet,you,youd,you'll,your,youre,yours,yourself,yourselves,you've,z,zero";